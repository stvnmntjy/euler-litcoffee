var Functional=this.Functional||{};Functional.install=function(e){var t=Functional,n=function(){return this}();for(var r in t)r=="install"||r.charAt(0)=="_"||e&&r in e||!t.hasOwnProperty(r)||(n[r]=t[r])};Functional.compose=function(){var e=Functional.map(Function.toFunction,arguments),t=e.length;return function(){for(var n=t;--n>=0;)arguments=[e[n].apply(this,arguments)];return arguments[0]}};Functional.sequence=function(){var e=Functional.map(Function.toFunction,arguments),t=e.length;return function(){for(var n=0;n<t;n++)arguments=[e[n].apply(this,arguments)];return arguments[0]}};Functional.map=function(e,t,n){e=Function.toFunction(e);var r=t.length,i=new Array(r);for(var s=0;s<r;s++)i[s]=e.apply(n,[t[s],s]);return i};Functional.reduce=function(e,t,n,r){e=Function.toFunction(e);var i=n.length,s=t;for(var o=0;o<i;o++)s=e.apply(r,[s,n[o]]);return s};Functional.select=function(e,t,n){e=Function.toFunction(e);var r=t.length,i=[];for(var s=0;s<r;s++){var o=t[s];e.apply(n,[o,s])&&i.push(o)}return i};Functional.filter=Functional.select;Functional.foldl=Functional.reduce;Functional.foldr=function(e,t,n,r){e=Function.toFunction(e);var i=n.length,s=t;for(var o=i;--o>=0;)s=e.apply(r,[n[o],s]);return s};Functional.and=function(){var e=Functional.map(Function.toFunction,arguments),t=e.length;return function(){var n=true;for(var r=0;r<t;r++)if(!(n=e[r].apply(this,arguments)))break;return n}};Functional.or=function(){var e=Functional.map(Function.toFunction,arguments),t=e.length;return function(){var n=false;for(var r=0;r<t;r++)if(n=e[r].apply(this,arguments))break;return n}};Functional.some=function(e,t,n){e=Function.toFunction(e);var r=t.length,i=false;for(var s=0;s<r;s++)if(i=e.call(n,t[s]))break;return i};Functional.every=function(e,t,n){e=Function.toFunction(e);var r=t.length,i=true;for(var s=0;s<r;s++)if(!(i=e.call(n,t[s])))break;return i};Functional.not=function(e){e=Function.toFunction(e);return function(){return!e.apply(null,arguments)}};Functional.equal=function(){var e=arguments.length,t=Functional.map(Function.toFunction,arguments);if(!e)return Functional.K(true);return function(){var n=t[0].apply(this,arguments);for(var r=1;r<e;r++)if(n!=t[r].apply(this,arguments))return false;return true}};Functional.lambda=function(e){return e.toFunction()};Functional.invoke=function(e){var t=Array.slice(arguments,1);return function(n){return n[e].apply(n,Array.slice(arguments,1).concat(t))}};Functional.pluck=function(e){return function(t){return t[e]}};Functional.until=function(e,t){t=Function.toFunction(t);e=Function.toFunction(e);return function(n){while(!e.call(null,n))n=t.call(null,n);return n}};Functional.zip=function(){var e=Math.min.apply(null,Functional.map(".length",arguments));var t=new Array(e);for(var n=0;n<e;n++){var r=String(n);t[r]=Functional.map(pluck(r),arguments)}return t};Functional._startRecordingMethodChanges=function(e){var t={};for(var n in e)t[n]=e[n];return{getChangedMethods:function(){var n={};for(var r in e)if(e[r]!=t[r])n[r]=e[r];return n}}};Functional._attachMethodDelegates=function(e){for(var t in e)Functional[t]=Functional[t]||function(t){var n=e[t];return function(e){return n.apply(Function.toFunction(e),Array.slice(arguments,1))}}(t)};Functional.__initalFunctionState=Functional._startRecordingMethodChanges(Function.prototype);Function.prototype.bind=function(e){var t=this;var n=Array.slice(arguments,1);return function(){return t.apply(e,n.concat(Array.slice(arguments,0)))}};Function.prototype.saturate=function(){var e=this;var t=Array.slice(arguments,0);return function(){return e.apply(this,t)}};Function.prototype.aritize=function(e){var t=this;return function(){return t.apply(this,Array.slice(arguments,0,e))}};Function.prototype.curry=function(){var e=this;var t=Array.slice(arguments,0);return function(){return e.apply(this,t.concat(Array.slice(arguments,0)))}};Function.prototype.rcurry=function(){var e=this;var t=Array.slice(arguments,0);return function(){return e.apply(this,Array.slice(arguments,0).concat(t))}};Function.prototype.ncurry=function(e){var t=this;var n=Array.slice(arguments,1);return function(){var r=n.concat(Array.slice(arguments,0));if(r.length<e){r.unshift(e);return t.ncurry.apply(t,r)}return t.apply(this,r)}};Function.prototype.rncurry=function(e){var t=this;var n=Array.slice(arguments,1);return function(){var r=Array.slice(arguments,0).concat(n);if(r.length<e){r.unshift(e);return t.rncurry.apply(t,r)}return t.apply(this,r)}};_=Function._={};Function.prototype.partial=function(){var e=this;var t=Function._;var n=Array.slice(arguments,0);var r=[],i;for(var s=0;s<arguments.length;s++)arguments[s]==t&&r.push(s);return function(){var i=n.concat(Array.slice(arguments,r.length));for(var s=0;s<Math.min(r.length,arguments.length);s++)i[r[s]]=arguments[s];for(var s=0;s<i.length;s++)if(i[s]==t)return e.partial.apply(e,i);return e.apply(this,i)}};Functional.I=function(e){return e};Functional.K=function(e){return function(){return e}};Functional.id=Functional.I;Functional.constfn=Functional.K;Function.S=function(e,t){e=Function.toFunction(e);t=Function.toFunction(t);return function(){return e.apply(this,[t.apply(this,arguments)].concat(Array.slice(arguments,0)))}};Function.prototype.flip=function(){var e=this;return function(){var t=Array.slice(arguments,0);t=t.slice(1,2).concat(t.slice(0,1)).concat(t.slice(2));return e.apply(this,t)}};Function.prototype.uncurry=function(){var e=this;return function(){var t=e.apply(this,Array.slice(arguments,0,1));return t.apply(this,Array.slice(arguments,1))}};Function.prototype.prefilterObject=function(e){e=Function.toFunction(e);var t=this;return function(){return t.apply(e(this),arguments)}};Function.prototype.prefilterAt=function(e,t){t=Function.toFunction(t);var n=this;return function(){var r=Array.slice(arguments,0);r[e]=t.call(this,r[e]);return n.apply(this,r)}};Function.prototype.prefilterSlice=function(e,t,n){e=Function.toFunction(e);t=t||0;var r=this;return function(){var i=Array.slice(arguments,0);var s=n<0?i.length+n:n||i.length;i.splice.apply(i,[t,(s||i.length)-t].concat(e.apply(this,i.slice(t,s))));return r.apply(this,i)}};Function.prototype.compose=function(e){var t=this;e=Function.toFunction(e);return function(){return t.apply(this,[e.apply(this,arguments)])}};Function.prototype.sequence=function(e){var t=this;e=Function.toFunction(e);return function(){return e.apply(this,[t.apply(this,arguments)])}};Function.prototype.guard=function(e,t){var n=this;e=Function.toFunction(e||Functional.I);t=Function.toFunction(t||Functional.I);return function(){return(e.apply(this,arguments)?n:t).apply(this,arguments)}};Function.prototype.traced=function(e){var t=this,n=function(){return this}(),r=function(){};if(typeof console!="undefined"&&typeof console.info=="function"){r=console.info}else if(typeof print=="function"){r=print}e=e||t;return function(){r("[",e,"apply(",this!=n&&this,",",arguments,")");var i=t.apply(this,arguments);r("]",e," -> ",i);return i}};Functional._attachMethodDelegates(Functional.__initalFunctionState.getChangedMethods());delete Functional.__initalFunctionState;Function.toFunction=Function.toFunction||Functional.K;if(!Array.slice){Array.slice=function(e){return function(t){return e.apply(t,e.call(arguments,1))}}(Array.prototype.slice)}
